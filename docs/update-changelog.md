---
summary: '最新コミットから CHANGELOG.md を更新するチェックリスト'
read_when:
  - CHANGELOG.md の更新やリリースノート作成時
---

# CHANGELOG.md の更新

目的: 最後のリリースタグ以降のユーザー向け変更をキュレートし、`CHANGELOG.md`（Unreleased セクション）に記録する。

## スコープと入力

- まずリポジトリの `AGENTS.MD` を読む（リポジトリ固有のリリースドキュメントがあればそれも、例: `docs/RELEASING.md`）
- ベースラインバージョン: 指定があればそれを使用、なければ `git describe --tags --abbrev=0` の最新タグ
- 対象ファイル: リポジトリの `CHANGELOG.md`

## 手順

1) **ベースラインを選択**
   - 指定がない場合: `git describe --tags --abbrev=0` → `<tag>`

2) **ベースライン以降のコミットを収集**
   ```bash
   git log <tag>..HEAD --oneline --reverse
   ```
   必要に応じて diff を確認し、ユーザー向けの影響を理解。

3) **エントリをキュレート（ユーザー向けのみ）**
   - 含める: リリースされた機能、修正、破壊的変更、注目すべき UX や動作の調整
   - 除外: 内部リファクタ、タイポのみの修正、ユーザー影響のない依存関係更新、同じ期間で追加後削除された機能
   - インパクト順に並べる: 破壊的変更 → 機能 → 修正 → その他
   - PR/issue 番号があれば追加（`#123`）。コミットのみの場合は参照をスキップして簡潔に（生のハッシュは避ける）

4) **`CHANGELOG.md` を編集**
   - トップに `## Unreleased` セクションがあることを確認、なければ作成
   - `Unreleased` の下に箇条書きを追加。既存のスタイルを維持（箇条書き、過去形動詞または短い説明、コード部分はバッククォート）
   - リリース準備中は "Unreleased" ブロックをバージョン付きセクションと分離し、タグ付け時にキュレートしたノートを新バージョンの下に移動

5) **サニティチェック**
   - Markdown が正しくレンダリングされる、重複エントリなし、簡潔な文言
   - リリース直後は、次のパッチ用に新しい `Unreleased` セクションを開始

## フォーマット例

```markdown
## Unreleased
- 設定可能なステータスプローブのリフレッシュ間隔を追加 #123
- スリープ/ウェイク時のメニューバーアイコンの暗転を修正 #128
```
